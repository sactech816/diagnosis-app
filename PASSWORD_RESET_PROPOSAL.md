# パスワードリセット代替案の提案

## 現状の問題
現在のメールリセット方式がうまく動作していないとのことです。

## 提案する代替案

### 案1: 管理者への連絡フォーム（推奨）
**概要**: パスワードを忘れたユーザーが、管理者に直接連絡できるフォームを表示

**メリット**:
- 実装が簡単
- 確実にサポートが受けられる
- メールの問題に依存しない
- 管理者が直接対応できる

**デメリット**:
- 管理者の手動作業が必要
- 即座にリセットできない

**実装方法**:
1. 「パスワードを忘れた方」ボタンから、連絡フォームを表示
2. ユーザーがメールアドレスと連絡内容を入力
3. 管理者のメールアドレス（環境変数から取得）に通知が送信
4. 管理者がSupabaseの管理画面から手動でパスワードをリセット
5. 新しいパスワードをユーザーに通知

---

### 案2: セキュリティ質問方式
**概要**: ユーザー登録時にセキュリティ質問を設定し、その答えでリセット

**メリット**:
- 自動化できる
- メールに依存しない

**デメリット**:
- 既存ユーザーにはセキュリティ質問がないため、新規登録時からしか使えない
- セキュリティ質問の回答を忘れる可能性がある
- データベーススキーマの変更が必要

**実装方法**:
1. ユーザーテーブルに`security_question`と`security_answer`カラムを追加
2. 新規登録時にセキュリティ質問と回答を設定
3. パスワードリセット時にセキュリティ質問を表示
4. 正しい回答ができたらパスワードをリセット可能に

---

### 案3: 管理者によるパスワードリセット機能
**概要**: 管理者がダッシュボードからユーザーのパスワードをリセットできる機能

**メリット**:
- 管理者が直接対応できる
- 迅速に対応可能

**デメリット**:
- Supabaseの管理APIを使う必要がある（サーバー側実装が必要）
- 実装が複雑

**実装方法**:
1. 管理者ダッシュボードに「ユーザー管理」セクションを追加
2. メールアドレスでユーザーを検索
3. パスワードリセットリンクを発行して管理者が確認・送信
4. または一時パスワードを生成してユーザーに通知

---

## 推奨案
**案1（管理者への連絡フォーム）**を推奨します。

理由:
1. 最もシンプルで確実
2. メールの問題に依存しない
3. 既存ユーザーにもすぐに使える
4. 実装が簡単

## 実装の準備
どの案を採用するかご相談ください。案1を採用する場合は、以下の情報が必要です：
- 管理者のメールアドレス（通知先）
- 連絡フォームのメッセージ内容

ご希望をお聞かせください。